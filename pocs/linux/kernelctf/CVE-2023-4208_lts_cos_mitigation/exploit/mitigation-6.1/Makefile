exploit: poc root run.sh
	tar czf ./poc.tar.gz root poc POC ip0 ip1
	cp run.sh exploit
	fallocate -l 512 exploit
	dd if=poc.tar.gz of=exploit conv=notrunc oflag=append

poc: poc.c foo.o sc.h
	gcc poc.c -o poc -static -no-pie -g foo.o -pthread
root: root.c
	gcc -static -o root root.c
foo.o: foo.s
	nasm -f elf64 foo.s
sc.h: sc.py
	python3 sc.py > sc.h

clean:
	rm -rf exploit poc foo.o sc.h root 

